# adapters


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## Simple Adapter Factory

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-fasthtml-workers/blob/main/cjm_fasthtml_workers/core/adapters.py#L13"
target="_blank" style="float:right; font-size:smaller">source</a>

### create_simple_adapter

>  create_simple_adapter (plugin_manager:Any,
>                             result_adapter:Optional[<built-
>                             infunctioncallable>]=None)

*Create a simple adapter for a plugin manager.*

<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 25%" />
<col style="width: 34%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>plugin_manager</td>
<td>Any</td>
<td></td>
<td>The plugin manager instance to adapt</td>
</tr>
<tr>
<td>result_adapter</td>
<td>Optional</td>
<td>None</td>
<td>Optional function to convert plugin results to dict</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>PluginManagerAdapter</strong></td>
<td></td>
<td><strong>Adapter that satisfies PluginManagerAdapter
protocol</strong></td>
</tr>
</tbody>
</table>

The
[`create_simple_adapter`](https://cj-mills.github.io/cjm-fasthtml-workers/core/adapters.html#create_simple_adapter)
function is useful when you have an existing plugin manager that doesnâ€™t
explicitly implement the
[`PluginManagerAdapter`](https://cj-mills.github.io/cjm-fasthtml-workers/core/protocol.html#pluginmanageradapter)
protocol. It wraps your plugin manager and ensures it has all the
required methods.

You can optionally provide a `result_adapter` function to transform
plugin execution results into a standard dictionary format. This is
helpful when different plugins return results in different formats.

``` python
# Create a mock plugin manager for testing
class MockPluginManager:
    def discover_plugins(self):
        return [type('Plugin', (), {'name': 'test_plugin'})]
    
    def load_plugin(self, plugin_data, config):
        pass
    
    def execute_plugin(self, plugin_name, **params):
        return {'result': f'Executed {plugin_name}'}
    
    def execute_plugin_stream(self, plugin_name, **params):
        yield f'Stream from {plugin_name}'
    
    def reload_plugin(self, plugin_name, config=None):
        pass
    
    def unload_plugin(self, plugin_name):
        pass
    
    def check_streaming_support(self, plugin_name):
        return True

# Test creating an adapter
mock_manager = MockPluginManager()
adapter = create_simple_adapter(mock_manager)
adapter
```

    <__main__.create_simple_adapter.<locals>.SimpleAdapter>

``` python
# Test adapter methods
adapter.discover_plugins()
```

    [__main__.Plugin]

``` python
# Test execution
adapter.execute_plugin('test_plugin', param1='value1')
```

    {'result': 'Executed test_plugin'}

``` python
# Test with custom result adapter
def custom_adapter(result):
    return {'transformed': True, 'original': result}

adapter_with_transform = create_simple_adapter(mock_manager, result_adapter=custom_adapter)
adapter_with_transform.execute_plugin('test_plugin')
```

    {'transformed': True, 'original': {'result': 'Executed test_plugin'}}

## Default Result Adapter

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-fasthtml-workers/blob/main/cjm_fasthtml_workers/core/adapters.py#L63"
target="_blank" style="float:right; font-size:smaller">source</a>

### default_result_adapter

>  default_result_adapter (result:Any)

*Default adapter for converting plugin results to dictionaries.*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>Any</td>
<td>Plugin execution result</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>Dict</strong></td>
<td><strong>Dictionary with text and metadata</strong></td>
</tr>
</tbody>
</table>

The
[`default_result_adapter`](https://cj-mills.github.io/cjm-fasthtml-workers/core/adapters.html#default_result_adapter)
handles three common cases: 1. Results that are already dictionaries
(pass-through) 2. Objects with `text` and `metadata` attributes 3. Plain
values (converted to string for the `text` field)

``` python
# Test with dict input
result_dict = {'text': 'Hello', 'metadata': {'key': 'value'}}
default_result_adapter(result_dict)
```

    {'text': 'Hello', 'metadata': {'key': 'value'}}

``` python
# Test with object that has text and metadata attributes
class DummyResult:
    def __init__(self):
        self.text = "Result text"
        self.metadata = {"source": "test"}

default_result_adapter(DummyResult())
```

    {'text': 'Result text', 'metadata': {'source': 'test'}}

``` python
# Test with plain string
default_result_adapter("Plain text result")
```

    {'text': 'Plain text result', 'metadata': {}}
